"use strict";angular.module("filmApp",["ngAnimate","ngCookies","ngRoute","ngSanitize","ngTouch","slick","ngFlag"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/film/:id",{templateUrl:"views/film.html",controller:"FilmCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).when("/favorite",{templateUrl:"views/favorite.html",controller:"FavoriteCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("filmApp").controller("MainCtrl",["$scope","MovieDB","manageFavorite","$rootScope",function(a,b,c,d){a.MovieDB=b,d.bgImage="",a.monClick=function(){var c=a.TitreNouveauFilm,d=a.CommentaireNouveauFilm,e={titre:c,commentaire:d};b.ajoutFilm(e)},a.suprElement=function(a){b.suppressionFilm(a)},a.removeFavorite=function(a){c.removeFavorite(a)},a.addFavorite=function(a){c.addFavorite(a)},a.isFavorite=function(a){var b=c.isFavorite(a);return b},a.active=!0,a.nbAffiche=10}]),angular.module("filmApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("filmApp").controller("FilmCtrl",["$scope","$routeParams","MovieDB","$http","$rootScope",function(a,b,c,d,e){a.id=b.id;var f=b.id;a.imgURL="http://image.tmdb.org/t/p/",e.MovieDB=c,d.get("http://amc.ig.he-arc.ch:3003/movie/"+f+"?append_to_response=similar,releases,credits").success(function(b){a.film=b,e.bgImage=b.backdrop_path})}]),angular.module("filmApp").factory("MovieDB",["$http",function(a){var b=localStorage.getItem("listeFilms")||"[]",c=JSON.parse(b);a.get("http://amc.ig.he-arc.ch:3003/movie/upcoming?language=fr").success(function(a){c=a.results,console.log(c)});return{imgURL:"http://image.tmdb.org/t/p/",someMethod:function(){return c},getListeFilms:function(){return c},ajoutFilm:function(a){c.push(a);var b=JSON.stringify(c);localStorage.setItem("listeFilms",b)},suppressionFilm:function(a){var b=c.indexOf(a);c.splice(b,1);var d=JSON.stringify(c);localStorage.setItem("listeFilms",d)}}}]),angular.module("filmApp").filter("urlPoster",["MovieDB",function(a){return function(b){return b?a.imgURL+"w185"+b:void 0}}]),angular.module("filmApp").factory("manageFavorite",function(){var a=localStorage.getItem("listeFavorites")||"[]",b=JSON.parse(a),c=42;return{someMethod:function(){return c},getFavorite:function(){return b},addFavorite:function(a){b.push(a);var c=JSON.stringify(b);localStorage.setItem("listeFavorites",c)},removeFavorite:function(a){var c=b.indexOf(a);b.splice(c,1);var d=JSON.stringify(b);localStorage.setItem("listeFavorites",d)},isFavorite:function(a){return-1!=b.indexOf(a)?!0:!1}}}),angular.module("filmApp").factory("MovieDB",["$http",function(a){var b=localStorage.getItem("listeFilms")||"[]",c=JSON.parse(b);a.get("http://amc.ig.he-arc.ch:3003/movie/upcoming?language=fr").success(function(a){c=a.results,console.log(c)});return{imgURL:"http://image.tmdb.org/t/p/",someMethod:function(){return c},getListeFilms:function(){return c},ajoutFilm:function(a){c.push(a);var b=JSON.stringify(c);localStorage.setItem("listeFilms",b)},suppressionFilm:function(a){var b=c.indexOf(a);c.splice(b,1);var d=JSON.stringify(c);localStorage.setItem("listeFilms",d)}}}]),angular.module("filmApp").controller("FavoriteCtrl",["$scope","manageFavorite","MovieDB","$rootScope","$http",function(a,b,c,d,e){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],d.manageFavorite=b;var f=localStorage.getItem("listeFilms")||"[]",g=JSON.parse(f),h=b.getFavorite();a.listeMovieFavorite=[];for(var i=0;i<h.length;i++)for(var j=0;j<g.length;j++)g[j].id===h[i]&&a.listeMovieFavorite.push(g[j]);a.isFavorite=function(a){var c=b.isFavorite(a);return c},a.removeFavorite=function(a){b.removeFavorite(a),location.reload()}}]);